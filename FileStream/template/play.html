<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ”†å½¡âŸ¨ HEROFLiX âŸ©å½¡ðŸ”†</title>

<link rel="icon" href="https://i.ibb.co/vxJD4dHK/0e76d1ae7331ca3964dd169b8b5c2f10.jpg" type="image/x-icon">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/proavipatil/data@main/fs/src/plyr.css">

<style>
body {
    background: #0d0d0d;
    color: white;
    font-family: 'Josefin Sans', sans-serif;
    user-select: none;
}
nav { padding: 15px 10px; text-align: center; }
nav h3 { font-size: 26px; font-weight: 700; color: #ffcc00; }

.file-name { text-align: center; margin-top: 20px; font-weight: 600; font-size: 15px; }

/* Play Button */
#playOverlay img {
    width: 20vw;
    max-width: 130px;
    min-width: 60px;
    filter: drop-shadow(0 0 6px #000);
}

/* Fade Hide Logic */
.left-skip, .right-skip, #playOverlay {
    opacity: 1;
    transition: opacity .35s ease;
    pointer-events: auto;
}
.hide-controls { opacity: 0; pointer-events: none; }

/* Skip Buttons */
.skip-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    padding: 10px;
    user-select: none;
}
.left-skip { left: 20%; }
.right-skip { right: 20%; }

/* Buttons Below Player */
.downloadBtn button {
    background: #222;
    border: 1px solid #444;
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 13px;
    color: #fff;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 7px;
    cursor: pointer;
}
.downloadBtn button:hover {
    background: #ffcc00;
    color: #000;
    border-color: #ffcc00;
}
</style>
</head>

<body>

<nav><h3>ðŸ”†å½¡âŸ¨ HEROFLiX âŸ©å½¡ðŸ”†</h3></nav>

<div style="width:100%; max-width:900px; margin:auto;">

<!-- VIDEO PLAYER -->
<div style="position: relative;">
    <video id="player" class="player"
        src="{{file_url}}" type="video/mp4"
        playsinline controls width="100%">
    </video>

    <!-- PLAY/PAUSE ICON -->
    <div id="playOverlay"
        style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); cursor:pointer;">
        <img src="https://i.ibb.co/hFsmpbvd/play.png">
    </div>

    <!-- BACK 10s -->
    <div class="skip-btn left-skip" onclick="skipBack()">
        <img src="https://i.ibb.co/S70cgrW5/backward.png" width="50">
    </div>

    <!-- FORWARD 10s -->
    <div class="skip-btn right-skip" onclick="skipForward()">
        <img src="https://i.ibb.co/N252Lk5Y/forward.png" width="50">
    </div>
</div>

<div class="file-name">[{{file_size}}] <span id="cleanName"></span></div>

<!-- ACTION BUTTONS -->
<div class="downloadBtn"
     style="display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-top:25px;">
    <button onclick="streamDownload()">
        <img style="height:22px;" src="https://i.ibb.co/D6CnBqs/download.png"> Download
    </button>
    <button onclick="copyStreamLink()">
        <img style="height:22px;" src="https://i.ibb.co/RTH4vkB5/copy-link.png"> Copy Link
    </button>
    <button onclick="vlc_player()">
        <img style="height:22px;" src="https://i.ibb.co/px6fQs1/vlc.png"> VLC Player
    </button>
    <button onclick="mx_player()">
        <img style="height:22px;" src="https://i.ibb.co/41WvtQ3/mx.png"> MX Player
    </button>
</div>

</div>

<script>
const video = document.getElementById("player");
const overlay = document.getElementById("playOverlay");
let controlsTimeout;

/* CLEAN FILENAME */
function cleanFileName(name){
    return name.replace(/^.*?-/, "").trim();
}
document.getElementById("cleanName").innerText = cleanFileName("{{file_name}}");

/* AUTOPLAY (NOT MUTED) */
video.play().catch(()=>{});

/* SKIPS */
function skipBack(){ video.currentTime -= 10; }
function skipForward(){ video.currentTime += 10; }

/* DOWNLOAD + COPY */
function streamDownload(){
    let url = window.location.href.replace("/watch/", "/dl/").replace("/view/", "/dl/");
    alert("â¬‡ï¸ Download Started!"); window.location.href = url;
}
function copyStreamLink(){ navigator.clipboard.writeText(window.location.href); alert("ðŸ”— Link Copied!"); }

/* SHOW CONTROLS */
function showControls() {
    overlay.classList.remove("hide-controls");
    document.querySelector('.left-skip').classList.remove("hide-controls");
    document.querySelector('.right-skip').classList.remove("hide-controls");

    clearTimeout(controlsTimeout);
    if (!video.paused) controlsTimeout = setTimeout(hideControls, 5000);
}

/* HIDE CONTROLS (ONLY WHEN PLAYING) */
function hideControls() {
    if (video.paused) return;
    overlay.classList.add("hide-controls");
    document.querySelector('.left-skip').classList.add("hide-controls");
    document.querySelector('.right-skip').classList.add("hide-controls");
}

/* TAP ANYWHERE TO TOGGLE PLAY/PAUSE */
function screenTap(){
    if (video.paused){
        video.play();
        showControls();
    } else {
        video.pause();
        showControls();
    }
}
video.addEventListener("click", screenTap);
video.addEventListener("touchend", screenTap);

/* PLAY BUTTON (same as tap) */
overlay.addEventListener("click", e=>{
    e.stopPropagation();
    screenTap();
});

/* SHOW CONTROLS DURING MOVEMENT */
video.addEventListener("mousemove", showControls);
video.addEventListener("touchmove", showControls);
video.addEventListener("play", showControls);
video.addEventListener("pause", showControls);

/* âœ” FIXED MX PLAYER */
function mx_player(){
    var url = "{{file_url}}";

    window.location.href =
    `intent:${encodeURIComponent(url)}#Intent;action=android.intent.action.VIEW;type=video/*;package=com.mxtech.videoplayer.ad;S.title=${encodeURIComponent("{{file_name}}")};end`;

    setTimeout(()=>{
        window.location.href =
        `intent:${encodeURIComponent(url)}#Intent;action=android.intent.action.VIEW;type=video/*;package=com.mxtech.videoplayer.pro;S.title=${encodeURIComponent("{{file_name}}")};end`;
    }, 800);
}

/* VLC */
function vlc_player(){
    window.location.href = `vlc://{{file_url}}`;
}
</script>

<script src="https://cdn.plyr.io/3.6.9/plyr.js"></script>
</body>
</html>
